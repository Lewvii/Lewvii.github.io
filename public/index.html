<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.145.0"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Lewvii&#39;s Blog</title>

<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.6da9a63d25a9608bca2f7f907a030e887a7dd3c3f3918e4cc113129361414bda.css" integrity="sha256-bammPSWpYIvKL3&#43;QegMOiHp908PzkY5MwRMSk2FBS9o=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml">
<link rel="alternate" hreflang="zh-cn" href="http://localhost:1313/">
<link rel="alternate" hreflang="en-us" href="http://localhost:1313/en-us/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Lewvii&#39;s Blog (Alt + H)">Lewvii&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://localhost:1313/en-us/" title="English"
                            aria-label="English">En-Us</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<article class="first-entry home-info">
    <header class="entry-header">
        <h1>欢迎来到Lewvii的博客</h1>
    </header>
    <div class="entry-content">
        这是一个分享技术与生活的网站，基于Hugo搭建。
    </div>
    <footer class="entry-footer">
        <div class="social-icons" >
    <a href="https://github.com/lewvii" target="_blank" rel="noopener noreferrer me"
        title="Github">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
    </a>
    <a href="https://twitter.com/yourhandle" target="_blank" rel="noopener noreferrer me"
        title="Twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
    </path>
</svg>
    </a>
</div>

    </footer>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">装饰器以及if-else消除
    </h2>
  </header>
  <div class="entry-content">
    <p>#include &lt;map&gt; #include &lt;memory&gt; #include &#34;msglib.h&#34; struct MsgBase { virtual void speak() = 0; virtual void load() = 0; virtual ~MsgBase() = default; using Ptr = std::shared_ptr&lt;MsgBase&gt;; }; namespace msg_extra_funcs { // 无法为 Msg 们增加成员函数，只能以重载的形式，外挂追加 void load(MoveMsg &amp;msg) { std::cin &gt;&gt; msg.x &gt;&gt; msg.y; } void load(JumpMsg &amp;msg) { std::cin &gt;&gt; msg.height; } void load(SleepMsg &amp;msg) { std::cin &gt;&gt; msg.time; } void load(ExitMsg &amp;) { } } template &lt;class Msg&gt; struct MsgImpl : MsgBase { Msg msg; void speak() override { msg.speak(); } void load() override { msg_extra_funcs::load(msg); } }; struct MsgFactoryBase { virtual MsgBase::Ptr create() = 0; virtual ~MsgFactoryBase() = default; using Ptr = std::shared_ptr&lt;MsgFactoryBase&gt;; }; template &lt;class Msg&gt; struct MsgFactoryImpl : MsgFactoryBase { MsgBase::Ptr create() override { return std::make_shared&lt;MsgImpl&lt;Msg&gt;&gt;(); } }; template &lt;class Msg&gt; MsgFactoryBase::Ptr makeFactory() { return std::make_shared&lt;MsgFactoryImpl&lt;Msg&gt;&gt;(); } struct RobotClass { inline static const std::map&lt;std::string, MsgFactoryBase::Ptr&gt; factories = { {&#34;Move&#34;, makeFactory&lt;MoveMsg&gt;()}, {&#34;Jump&#34;, makeFactory&lt;JumpMsg&gt;()}, {&#34;Sleep&#34;, makeFactory&lt;SleepMsg&gt;()}, {&#34;Exit&#34;, makeFactory&lt;ExitMsg&gt;()}, }; void recv_data() { std::string type; std::cin &gt;&gt; type; try { msg = factories.at(type)-&gt;create(); } catch (std::out_of_range &amp;) { std::cout &lt;&lt; &#34;no such msg type!\n&#34;; return; } msg-&gt;load(); } void update() { if (msg) msg-&gt;speak(); } MsgBase::Ptr msg; }; int main() { RobotClass robot; robot.recv_data(); robot.update(); return 0; } </p>
  </div>
  <footer class="entry-footer"><span title='2025-03-22 23:49:28 +0800 CST'>March 22, 2025</span></footer>
  <a class="entry-link" aria-label="post link to 装饰器以及if-else消除" href="http://localhost:1313/posts/%E8%A3%85%E9%A5%B0%E5%99%A8%E4%BB%A5%E5%8F%8Aif-else%E6%B6%88%E9%99%A4/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">LLVM
    </h2>
  </header>
  <div class="entry-content">
    <p>以下是关于 LLVM 项目依赖情况的分析，以及它如何实现相对独立的机制： LLVM 如何实现“相对独立” LLVM 项目设计上追求模块化和自给自足，这体现在以下几个方面：
自举（Self-Hosting）能力
LLVM 的前端编译器 Clang 是专门为 LLVM 设计的。开发者可以用一个现有的编译器（如 GCC）先构建 Clang，然后用 Clang 再构建 LLVM，形成自举。 自举的好处是，LLVM 不长期依赖外部编译器。一旦 Clang 可用，它就能接管后续的构建过程。这种设计让 LLVM 在工具链层面尽量减少对外部项目的依赖。 模块化架构
LLVM 的核心是一个编译器基础设施库（IR、优化器、代码生成器等），这些组件是自包含的。它不依赖外部的解析器、优化器或其他编译器框架，而是自己实现了所有关键功能。 例如，Clang（前端）直接生成 LLVM IR（中间表示），然后交给 LLVM 核心处理，不需要借助其他工具或库。 最小化外部库使用
LLVM 开发者有意避免引入大型外部依赖。例如： 不使用 Boost 这样的大型 C&#43;&#43; 库，而是自己实现需要的工具函数。 文件格式（如 ELF、Mach-O）的解析器是内置的，而不是依赖外部库（如 libbfd）。 这种策略减少了外部库的版本兼容性问题，也让 LLVM 更容易在不同平台上部署。 跨平台设计
LLVM 的代码被设计为高度可移植，避免绑定到特定的操作系统或硬件。它通过抽象层（如 Support 库）处理平台差异，例如文件系统操作、线程管理等，这些功能都是自己实现的，而不是依赖外部库。 静态链接和独立性
在构建时，LLVM 通常会将核心功能静态链接到最终的可执行文件中（如 clang 或 lli）。这意味着用户拿到一个 LLVM 工具后，通常不需要额外安装其他运行时库。 LLVM 的依赖情况 LLVM 项目并不是完全没有依赖，而是它的依赖被刻意控制在最小范围，以保持移植性和独立性。以下是实际情况：
核心依赖
C&#43;&#43; 标准库：LLVM 是用 C&#43;&#43; 写的，因此依赖于目标平台的 C&#43;&#43; 标准库（如 libstdc&#43;&#43; 或 libc&#43;&#43;）。不过，它不绑定到某个特定的标准库实现，而是使用标准的 C&#43;&#43; 特性，尽量保持跨平台兼容。 操作系统和工具链：LLVM 需要基本的操作系统支持（文件 I/O、线程等）和一个现有的 C&#43;&#43; 编译器来构建自己（如 GCC、Clang 或 MSVC）。但这些是构建时的“环境依赖”，而不是运行时的库依赖。 可选依赖
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-03-20 18:43:26 +0800 CST'>March 20, 2025</span></footer>
  <a class="entry-link" aria-label="post link to LLVM" href="http://localhost:1313/posts/llvm/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Git
    </h2>
  </header>
  <div class="entry-content">
    <p>引用 在 Git 中，“引用”（References，简称 refs）是管理提交历史的核心机制之一。引用本质上是指向 Git 对象的指针（最常见的是指向提交对象），用于方便地标识分支、标签、远程仓库等。以下是 Git 引用的详细解析：
一、引用的本质 底层存储
Git 引用存储在 .git/refs 目录中，每个引用对应一个文件，文件中保存的是目标对象的 SHA-1 哈希值。
例如：.git/refs/heads/main 文件中存储的是 main 分支的最新提交的哈希值。 引用的作用
替代直接使用 SHA-1 哈希值，简化操作（如切换分支、查看提交历史）。 动态跟踪代码的最新状态（如分支的移动）。 二、引用的类型 Git 引用分为以下几类：
1. 本地分支（Branches） 路径: .git/refs/heads/&lt;branch-name&gt;
作用: 指向分支的最新提交（即分支的“头”）。
示例:
# 查看 main 分支的最新提交 cat .git/refs/heads/main 2. 标签（Tags） 路径: .git/refs/tags/&lt;tag-name&gt;
作用:
轻量标签: 直接指向某个提交的哈希值。 附注标签: 指向一个标签对象（包含作者、日期等信息），再由标签对象指向提交。 示例:
# 查看标签 v1.0 指向的提交 cat .git/refs/tags/v1.0 3. 远程跟踪分支（Remote-Tracking Branches） 路径: .git/refs/remotes/&lt;remote-name&gt;/&lt;branch-name&gt;
作用: 记录远程仓库分支的最后已知状态。
示例:
# 查看远程仓库 origin 的 main 分支状态 cat .git/refs/remotes/origin/main 4. 特殊引用 HEAD
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-03-18 09:57:19 +0800 CST'>March 18, 2025</span></footer>
  <a class="entry-link" aria-label="post link to Git" href="http://localhost:1313/posts/git/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Lewvii&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
